"use strict";var e=require("./prism.min"),r=require("./config"),s=require("../parser"),t=function(e){this.vm=e};t.prototype.onParse=function(t,n){if("pre"==t.name){for(var a=t.children.length;a--&&"code"!=t.children[a].name;);if(-1==a)return;var l=t.children[a],i=l.attrs.class||"";if(a=i.indexOf("language-"),-1==a&&(i=t.attrs.class||"",a=i.indexOf("language-")),-1!=a){a+=9;for(var c=a;c<i.length&&" "!=i[c];c++);var h=i.substring(a,c);if(l.children.length&&"text"==l.children[0].type){if(e.languages[h]){var p=l.children[0].text.replace(/&amp;/g,"&");l.children=new s(this.vm).parse("<pre>"+e.highlight(p,e.languages[h],h).replace(/token /g,"hl-")+"</pre>")[0].children}if(t.attrs.class="hl-pre",l.attrs.class="hl-code",r.showLanguageName&&t.children.push({name:"div",attrs:{class:"hl-language",style:"user-select:none"},children:[{type:"text",text:h}]}),r.copyByLongPress&&(t.attrs.style+=(t.attrs.style||"")+";user-select:none",t.attrs["data-content"]=p,n.expose()),r.showLineNumber){for(var g=p.split("\n").length,o=[],u=g;u--;)o.push({name:"span",attrs:{class:"span"}});t.children.push({name:"span",attrs:{class:"line-numbers-rows"},children:o})}}}}},module.exports=t;